(function(){"use strict";self.onmessage=f=>{const{width:i,height:o,firstImageData:t,secondImageData:a,showSimilarities:h,showDifferences:m,showBaseImage:g}=f.data,s=new Uint8ClampedArray(i*o*4);let l=0;const d=i*o,n=[0,255,0],c=[255,0,0],r=g?128:255;for(let e=0;e<t.length;e+=4)t[e]===a[e]&&t[e+1]===a[e+1]&&t[e+2]===a[e+2]&&t[e+3]===a[e+3]?(l++,h?(s[e]=n[0],s[e+1]=n[1],s[e+2]=n[2],s[e+3]=r):s[e+3]=0):m?(s[e]=c[0],s[e+1]=c[1],s[e+2]=c[2],s[e+3]=r):s[e+3]=0;const w=l/d*100;self.postMessage({comparisonData:s,similarityPercentage:w,width:i,height:o},[s.buffer])}})();
